{
    "version": "1.0.0",
    "description": "Laravel Stack Service Registry",
    "services": {
        "databases": {
            "postgres": {
                "name": "PostgreSQL",
                "description": "PostgreSQL relational database",
                "stub": "databases/postgres.stub",
                "volumes": ["postgres_data"],
                "ports": {
                    "internal": 5432,
                    "external": null
                },
                "default_variables": {
                    "POSTGRES_VERSION": "17",
                    "DB_CONNECTION": "pgsql",
                    "DB_HOST": "postgres",
                    "DB_PORT": "5432"
                },
                "required_variables": [
                    "DB_DATABASE",
                    "DB_USERNAME",
                    "DB_PASSWORD"
                ],
                "health_check": {
                    "test": ["CMD-SHELL", "pg_isready -U ${DB_USERNAME}"],
                    "interval": "10s",
                    "timeout": "5s",
                    "retries": 5
                }
            },
            "mysql": {
                "name": "MySQL",
                "description": "MySQL relational database",
                "stub": "databases/mysql.stub",
                "volumes": ["mysql_data"],
                "ports": {
                    "internal": 3306,
                    "external": null
                },
                "default_variables": {
                    "MYSQL_VERSION": "8.4",
                    "DB_CONNECTION": "mysql",
                    "DB_HOST": "mysql",
                    "DB_PORT": "3306"
                },
                "required_variables": [
                    "DB_DATABASE",
                    "DB_USERNAME",
                    "DB_PASSWORD",
                    "MYSQL_ROOT_PASSWORD"
                ]
            },
            "mariadb": {
                "name": "MariaDB",
                "description": "MariaDB relational database",
                "stub": "databases/mariadb.stub",
                "volumes": ["mariadb_data"],
                "ports": {
                    "internal": 3306,
                    "external": null
                },
                "default_variables": {
                    "MARIADB_VERSION": "11.4",
                    "DB_CONNECTION": "mysql",
                    "DB_HOST": "mariadb",
                    "DB_PORT": "3306"
                },
                "required_variables": [
                    "DB_DATABASE",
                    "DB_USERNAME",
                    "DB_PASSWORD",
                    "MARIADB_ROOT_PASSWORD"
                ]
            }
        },
        "cache": {
            "redis": {
                "name": "Redis",
                "description": "In-memory data structure store",
                "stub": "cache/redis.stub",
                "volumes": ["redis_data"],
                "ports": {
                    "internal": 6379,
                    "external": null
                },
                "default_variables": {
                    "REDIS_VERSION": "7",
                    "REDIS_HOST": "redis",
                    "REDIS_PORT": "6379",
                    "REDIS_MAX_MEMORY": "256mb"
                },
                "required_variables": []
            }
        },
        "search": {
            "meilisearch": {
                "name": "Meilisearch",
                "description": "Lightning-fast search engine",
                "stub": "search/meilisearch.stub",
                "volumes": ["meilisearch_data"],
                "ports": {
                    "internal": 7700,
                    "external": null
                },
                "default_variables": {
                    "MEILISEARCH_VERSION": "v1.11",
                    "MEILISEARCH_HOST": "http://meilisearch:7700",
                    "SCOUT_DRIVER": "meilisearch"
                },
                "required_variables": [
                    "MEILISEARCH_KEY"
                ]
            },
            "typesense": {
                "name": "Typesense",
                "description": "Fast, typo-tolerant search engine",
                "stub": "search/typesense.stub",
                "volumes": ["typesense_data"],
                "ports": {
                    "internal": 8108,
                    "external": null
                },
                "default_variables": {
                    "TYPESENSE_VERSION": "27.1",
                    "TYPESENSE_HOST": "typesense",
                    "TYPESENSE_PORT": "8108",
                    "SCOUT_DRIVER": "typesense"
                },
                "required_variables": [
                    "TYPESENSE_API_KEY"
                ]
            }
        },
        "storage": {
            "minio": {
                "name": "MinIO",
                "description": "S3-compatible object storage",
                "stub": "storage/minio.stub",
                "volumes": ["minio_data"],
                "ports": {
                    "internal": 9000,
                    "console": 9001,
                    "external": null
                },
                "default_variables": {
                    "MINIO_VERSION": "latest",
                    "AWS_ENDPOINT": "http://minio:9000",
                    "AWS_USE_PATH_STYLE_ENDPOINT": "true",
                    "FILESYSTEM_DISK": "s3"
                },
                "required_variables": [
                    "MINIO_ROOT_USER",
                    "MINIO_ROOT_PASSWORD",
                    "AWS_ACCESS_KEY_ID",
                    "AWS_SECRET_ACCESS_KEY",
                    "AWS_BUCKET"
                ]
            }
        },
        "mail": {
            "mailpit": {
                "name": "Mailpit",
                "description": "Email testing tool with web UI",
                "stub": "mail/mailpit.stub",
                "volumes": [],
                "ports": {
                    "smtp": 1025,
                    "http": 8025,
                    "external": null
                },
                "default_variables": {
                    "MAILPIT_VERSION": "latest",
                    "MAIL_MAILER": "smtp",
                    "MAIL_HOST": "mailpit",
                    "MAIL_PORT": "1025"
                },
                "required_variables": []
            }
        },
        "workers": {
            "scheduler": {
                "name": "Laravel Scheduler",
                "description": "Run scheduled tasks in dedicated container",
                "stub": "workers/scheduler.stub",
                "volumes": [],
                "ports": {},
                "default_variables": {},
                "required_variables": [],
                "health_check": {
                    "test": ["CMD", "healthcheck-schedule"],
                    "interval": "10s",
                    "timeout": "5s",
                    "retries": 5,
                    "start_period": "10s"
                }
            },
            "horizon": {
                "name": "Laravel Horizon",
                "description": "Dashboard and code-driven configuration for Laravel Redis queues",
                "stub": "workers/horizon.stub",
                "volumes": [],
                "ports": {},
                "default_variables": {
                    "QUEUE_CONNECTION": "redis",
                    "HORIZON_PREFIX": "horizon:"
                },
                "required_variables": [],
                "depends_on": ["redis"],
                "health_check": {
                    "test": ["CMD", "healthcheck-horizon"],
                    "start_period": "10s"
                }
            }
        }
    }
}
